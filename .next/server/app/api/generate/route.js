"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate/route";
exports.ids = ["app/api/generate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_bruno2025_Documents_iProjects_coloringpage_coloringpage_src_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/generate/route.ts */ \"(rsc)/./src/app/api/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate/route\",\n        pathname: \"/api/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate/route\"\n    },\n    resolvedPagePath: \"/Users/bruno2025/Documents/iProjects/coloringpage/coloringpage/src/app/api/generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_bruno2025_Documents_iProjects_coloringpage_coloringpage_src_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJydW5vMjAyNSUyRkRvY3VtZW50cyUyRmlQcm9qZWN0cyUyRmNvbG9yaW5ncGFnZSUyRmNvbG9yaW5ncGFnZSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZicnVubzIwMjUlMkZEb2N1bWVudHMlMkZpUHJvamVjdHMlMkZjb2xvcmluZ3BhZ2UlMkZjb2xvcmluZ3BhZ2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzRDO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29sb3JpbmdwYWdlLz85ZTBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9icnVubzIwMjUvRG9jdW1lbnRzL2lQcm9qZWN0cy9jb2xvcmluZ3BhZ2UvY29sb3JpbmdwYWdlL3NyYy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9icnVubzIwMjUvRG9jdW1lbnRzL2lQcm9qZWN0cy9jb2xvcmluZ3BhZ2UvY29sb3JpbmdwYWdlL3NyYy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/generate/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/generate/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   POST_old: () => (/* binding */ POST_old)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/imageProcessing */ \"(rsc)/./src/lib/imageProcessing.ts\");\n/* harmony import */ var _lib_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/queue */ \"(rsc)/./src/lib/queue.ts\");\n\n\n\n// SiliconFlow API configuration\nconst API_KEY = process.env.SILICONFLOW_API_KEY || \"sk-frjnkxrmiaajoxjziaqgwmyorlermfnpbctcchsvazrlxeah\";\nconst API_URL = process.env.SILICONFLOW_API_URL || \"https://api.siliconflow.cn/v1/images/generations\";\nconst MODEL = process.env.SILICONFLOW_MODEL || \"black-forest-labs/FLUX.1-schnell\";\n// 基础提示词模板\nconst BASE_PROMPT = `Create a clean black outline coloring page with the following characteristics:\n- Only simple black lines on white background\n- No shading, grayscale, or color\n- Clear distinct lines suitable for coloring\n- Clean and minimalist design\n- No text or labels\n- Perfect for printing and coloring with crayons or markers\nSubject: `;\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        // 验证请求\n        if (!body.prompt) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Prompt is required\"\n            }, {\n                status: 400\n            });\n        }\n        // 添加任务到队列\n        const jobId = await _lib_queue__WEBPACK_IMPORTED_MODULE_2__.imageQueue.addTask(body);\n        // 返回任务ID，客户端可以使用此ID轮询状态\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            jobId\n        });\n    } catch (error) {\n        console.error(\"Error in generate route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// 获取任务状态的端点\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const jobId = searchParams.get(\"jobId\");\n        if (!jobId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Job ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const status = await _lib_queue__WEBPACK_IMPORTED_MODULE_2__.imageQueue.getStatus(jobId);\n        if (!status) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Job not found\"\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(status);\n    } catch (error) {\n        console.error(\"Error in status route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST_old(request) {\n    try {\n        // 解析请求数据\n        const body = await request.json();\n        const { description, complexity, style, category = \"default\" } = body;\n        if (!description) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Description is required\"\n            }, {\n                status: 400\n            });\n        }\n        // 构建基础提示词\n        let basePrompt = `${BASE_PROMPT}${description}`;\n        // 根据复杂度调整提示词\n        const complexityModifiers = {\n            simple: \"with very simple shapes and minimal details, perfect for young children, \",\n            detailed: \"with intricate details and more complex elements, \",\n            medium: \"with moderate level of detail, \"\n        };\n        basePrompt += complexityModifiers[complexity] || complexityModifiers.medium;\n        // 根据风格调整提示词\n        const styleModifiers = {\n            cartoon: \"in a fun cartoon style, \",\n            realistic: \"with realistic proportions but still as a line drawing, \",\n            abstract: \"in an abstract artistic style, \",\n            geometric: \"using geometric shapes and patterns, \",\n            standard: \"\"\n        };\n        basePrompt += styleModifiers[style] || styleModifiers.standard;\n        // 使用提示词增强引擎优化提示词\n        const enhancedPrompt = (0,_lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__.enhancePrompt)(basePrompt, category);\n        // 获取类别特定的负面提示词\n        const negativePrompt = (0,_lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__.getCategoryNegativePrompts)(category);\n        // 获取最优种子范围\n        const [minSeed, maxSeed] = (0,_lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__.getOptimalSeedRange)(category);\n        const seed = Math.floor(Math.random() * (maxSeed - minSeed)) + minSeed;\n        // 获取优化的生成参数\n        const optimizedParams = (0,_lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__.getOptimizedParams)(complexity);\n        console.log(\"Generating image with prompt:\", enhancedPrompt);\n        console.log(\"Negative prompt:\", negativePrompt);\n        // 准备API请求参数\n        const payload = {\n            model: MODEL,\n            prompt: enhancedPrompt,\n            negative_prompt: negativePrompt,\n            seed,\n            ...optimizedParams\n        };\n        // 调用SiliconFlow API\n        const response = await fetch(API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${API_KEY}`\n            },\n            body: JSON.stringify(payload)\n        });\n        if (!response.ok) {\n            const errorData = await response.json();\n            console.error(\"API error:\", errorData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to generate image from API\",\n                details: errorData\n            }, {\n                status: response.status\n            });\n        }\n        const data = await response.json();\n        // 获取生成的图像数据\n        const imageResponse = await fetch(data.data[0].url);\n        const imageBlob = await imageResponse.blob();\n        // 优化生成的图像\n        const optimizedImageBlob = await (0,_lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__.optimizeImage)(imageBlob);\n        // 评估图像质量\n        const qualityScore = await (0,_lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__.assessImageQuality)(optimizedImageBlob);\n        // 如果质量分数低于阈值，尝试使用递归提示优化重新生成\n        if (qualityScore < 7.0) {\n            const optimizedPrompt = (0,_lib_imageProcessing__WEBPACK_IMPORTED_MODULE_1__.recursivePromptOptimization)(enhancedPrompt, [\n                data.data[0].url\n            ]);\n        // 这里可以添加重新生成的逻辑\n        }\n        // 返回生成结果\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            prompt: enhancedPrompt,\n            imageUrl: data.data[0].url,\n            message: \"Image generated successfully\",\n            qualityScore\n        });\n    } catch (error) {\n        console.error(\"Error generating image:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate image\",\n            details: error instanceof Error ? error.message : String(error)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtZQUFDO1FBRTlCO1FBRUEsTUFBTWdELE9BQU8sTUFBTVQsU0FBUzFDLElBQUk7UUFFaEMsWUFBWTtRQUNaLE1BQU1vRCxnQkFBZ0IsTUFBTVQsTUFBTVEsS0FBS0EsSUFBSSxDQUFDLEVBQUUsQ0FBQ3pDLEdBQUc7UUFDbEQsTUFBTTJDLFlBQVksTUFBTUQsY0FBY0UsSUFBSTtRQUUxQyxVQUFVO1FBQ1YsTUFBTUMscUJBQXFCLE1BQU10RSxtRUFBYUEsQ0FBQ29FO1FBRS9DLFNBQVM7UUFDVCxNQUFNRyxlQUFlLE1BQU10RSx3RUFBa0JBLENBQUNxRTtRQUU5Qyw0QkFBNEI7UUFDNUIsSUFBSUMsZUFBZSxLQUFLO1lBQ3RCLE1BQU1DLGtCQUFrQnpFLGlGQUEyQkEsQ0FBQzZDLGdCQUFnQjtnQkFBQ3NCLEtBQUtBLElBQUksQ0FBQyxFQUFFLENBQUN6QyxHQUFHO2FBQUM7UUFDdEYsZ0JBQWdCO1FBQ2xCO1FBRUEsU0FBUztRQUNULE9BQU8vQixxREFBWUEsQ0FBQ3FCLElBQUksQ0FBQztZQUN2QjBELFNBQVM7WUFDVHpELFFBQVE0QjtZQUNSOEIsVUFBVVIsS0FBS0EsSUFBSSxDQUFDLEVBQUUsQ0FBQ3pDLEdBQUc7WUFDMUJrRCxTQUFTO1lBQ1RKO1FBQ0Y7SUFFRixFQUFFLE9BQU90RCxPQUFPO1FBQ2RJLFFBQVFKLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU92QixxREFBWUEsQ0FBQ3FCLElBQUksQ0FDdEI7WUFDRUUsT0FBTztZQUNQZ0QsU0FBU2hELGlCQUFpQjJELFFBQVEzRCxNQUFNMEQsT0FBTyxHQUFHRSxPQUFPNUQ7UUFDM0QsR0FDQTtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbG9yaW5ncGFnZS8uL3NyYy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzPzkxZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFxuICBnZXRPcHRpbWFsU2VlZFJhbmdlLCBcbiAgZ2V0T3B0aW1pemVkUGFyYW1zLCBcbiAgZ2V0Q2F0ZWdvcnlOZWdhdGl2ZVByb21wdHMsXG4gIGVuaGFuY2VQcm9tcHQsXG4gIHJlY3Vyc2l2ZVByb21wdE9wdGltaXphdGlvbixcbiAgb3B0aW1pemVJbWFnZSxcbiAgYXNzZXNzSW1hZ2VRdWFsaXR5XG59IGZyb20gJ0AvbGliL2ltYWdlUHJvY2Vzc2luZyc7XG5pbXBvcnQgeyBcbiAgQ2F0ZWdvcnlUeXBlLCBcbiAgQ29tcGxleGl0eVR5cGUsIFxuICBTdHlsZVR5cGUsIFxuICBHZW5lcmF0aW9uUmVxdWVzdCwgXG4gIEdlbmVyYXRpb25SZXNwb25zZSBcbn0gZnJvbSAnQC90eXBlcy9pbWFnZSc7XG5pbXBvcnQgeyBpbWFnZVF1ZXVlIH0gZnJvbSAnQC9saWIvcXVldWUnO1xuXG4vLyBTaWxpY29uRmxvdyBBUEkgY29uZmlndXJhdGlvblxuY29uc3QgQVBJX0tFWSA9IHByb2Nlc3MuZW52LlNJTElDT05GTE9XX0FQSV9LRVkgfHwgJ3NrLWZyam5reHJtaWFham94anppYXFnd215b3JsZXJtZm5wYmN0Y2Noc3ZhenJseGVhaCc7XG5jb25zdCBBUElfVVJMID0gcHJvY2Vzcy5lbnYuU0lMSUNPTkZMT1dfQVBJX1VSTCB8fCAnaHR0cHM6Ly9hcGkuc2lsaWNvbmZsb3cuY24vdjEvaW1hZ2VzL2dlbmVyYXRpb25zJztcbmNvbnN0IE1PREVMID0gcHJvY2Vzcy5lbnYuU0lMSUNPTkZMT1dfTU9ERUwgfHwgJ2JsYWNrLWZvcmVzdC1sYWJzL0ZMVVguMS1zY2huZWxsJztcblxuLy8g5Z+656GA5o+Q56S66K+N5qih5p2/XG5jb25zdCBCQVNFX1BST01QVCA9IGBDcmVhdGUgYSBjbGVhbiBibGFjayBvdXRsaW5lIGNvbG9yaW5nIHBhZ2Ugd2l0aCB0aGUgZm9sbG93aW5nIGNoYXJhY3RlcmlzdGljczpcbi0gT25seSBzaW1wbGUgYmxhY2sgbGluZXMgb24gd2hpdGUgYmFja2dyb3VuZFxuLSBObyBzaGFkaW5nLCBncmF5c2NhbGUsIG9yIGNvbG9yXG4tIENsZWFyIGRpc3RpbmN0IGxpbmVzIHN1aXRhYmxlIGZvciBjb2xvcmluZ1xuLSBDbGVhbiBhbmQgbWluaW1hbGlzdCBkZXNpZ25cbi0gTm8gdGV4dCBvciBsYWJlbHNcbi0gUGVyZmVjdCBmb3IgcHJpbnRpbmcgYW5kIGNvbG9yaW5nIHdpdGggY3JheW9ucyBvciBtYXJrZXJzXG5TdWJqZWN0OiBgO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keTogR2VuZXJhdGlvblJlcXVlc3QgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICAvLyDpqozor4Hor7fmsYJcbiAgICBpZiAoIWJvZHkucHJvbXB0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdQcm9tcHQgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyDmt7vliqDku7vliqHliLDpmJ/liJdcbiAgICBjb25zdCBqb2JJZCA9IGF3YWl0IGltYWdlUXVldWUuYWRkVGFzayhib2R5KTtcblxuICAgIC8vIOi/lOWbnuS7u+WKoUlE77yM5a6i5oi356uv5Y+v5Lul5L2/55So5q2kSUTova7or6LnirbmgIFcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBqb2JJZCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW5lcmF0ZSByb3V0ZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8g6I635Y+W5Lu75Yqh54q25oCB55qE56uv54K5XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3Qgam9iSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdqb2JJZCcpO1xuXG4gICAgaWYgKCFqb2JJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSm9iIElEIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgaW1hZ2VRdWV1ZS5nZXRTdGF0dXMoam9iSWQpO1xuICAgIFxuICAgIGlmICghc3RhdHVzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdKb2Igbm90IGZvdW5kJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHN0YXR1cyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc3RhdHVzIHJvdXRlOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVF9vbGQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyDop6PmnpDor7fmsYLmlbDmja5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCkgYXMgR2VuZXJhdGlvblJlcXVlc3Q7XG4gICAgY29uc3QgeyBkZXNjcmlwdGlvbiwgY29tcGxleGl0eSwgc3R5bGUsIGNhdGVnb3J5ID0gJ2RlZmF1bHQnIH0gPSBib2R5O1xuXG4gICAgaWYgKCFkZXNjcmlwdGlvbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRGVzY3JpcHRpb24gaXMgcmVxdWlyZWQnIH0gYXMgR2VuZXJhdGlvblJlc3BvbnNlLFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8g5p6E5bu65Z+656GA5o+Q56S66K+NXG4gICAgbGV0IGJhc2VQcm9tcHQgPSBgJHtCQVNFX1BST01QVH0ke2Rlc2NyaXB0aW9ufWA7XG5cbiAgICAvLyDmoLnmja7lpI3mnYLluqbosIPmlbTmj5DnpLror41cbiAgICBjb25zdCBjb21wbGV4aXR5TW9kaWZpZXJzID0ge1xuICAgICAgc2ltcGxlOiAnd2l0aCB2ZXJ5IHNpbXBsZSBzaGFwZXMgYW5kIG1pbmltYWwgZGV0YWlscywgcGVyZmVjdCBmb3IgeW91bmcgY2hpbGRyZW4sICcsXG4gICAgICBkZXRhaWxlZDogJ3dpdGggaW50cmljYXRlIGRldGFpbHMgYW5kIG1vcmUgY29tcGxleCBlbGVtZW50cywgJyxcbiAgICAgIG1lZGl1bTogJ3dpdGggbW9kZXJhdGUgbGV2ZWwgb2YgZGV0YWlsLCAnXG4gICAgfTtcbiAgICBiYXNlUHJvbXB0ICs9IGNvbXBsZXhpdHlNb2RpZmllcnNbY29tcGxleGl0eSBhcyBDb21wbGV4aXR5VHlwZV0gfHwgY29tcGxleGl0eU1vZGlmaWVycy5tZWRpdW07XG5cbiAgICAvLyDmoLnmja7po47moLzosIPmlbTmj5DnpLror41cbiAgICBjb25zdCBzdHlsZU1vZGlmaWVycyA9IHtcbiAgICAgIGNhcnRvb246ICdpbiBhIGZ1biBjYXJ0b29uIHN0eWxlLCAnLFxuICAgICAgcmVhbGlzdGljOiAnd2l0aCByZWFsaXN0aWMgcHJvcG9ydGlvbnMgYnV0IHN0aWxsIGFzIGEgbGluZSBkcmF3aW5nLCAnLFxuICAgICAgYWJzdHJhY3Q6ICdpbiBhbiBhYnN0cmFjdCBhcnRpc3RpYyBzdHlsZSwgJyxcbiAgICAgIGdlb21ldHJpYzogJ3VzaW5nIGdlb21ldHJpYyBzaGFwZXMgYW5kIHBhdHRlcm5zLCAnLFxuICAgICAgc3RhbmRhcmQ6ICcnXG4gICAgfTtcbiAgICBiYXNlUHJvbXB0ICs9IHN0eWxlTW9kaWZpZXJzW3N0eWxlIGFzIFN0eWxlVHlwZV0gfHwgc3R5bGVNb2RpZmllcnMuc3RhbmRhcmQ7XG5cbiAgICAvLyDkvb/nlKjmj5DnpLror43lop7lvLrlvJXmk47kvJjljJbmj5DnpLror41cbiAgICBjb25zdCBlbmhhbmNlZFByb21wdCA9IGVuaGFuY2VQcm9tcHQoYmFzZVByb21wdCwgY2F0ZWdvcnkgYXMgQ2F0ZWdvcnlUeXBlKTtcbiAgICBcbiAgICAvLyDojrflj5bnsbvliKvnibnlrprnmoTotJ/pnaLmj5DnpLror41cbiAgICBjb25zdCBuZWdhdGl2ZVByb21wdCA9IGdldENhdGVnb3J5TmVnYXRpdmVQcm9tcHRzKGNhdGVnb3J5IGFzIENhdGVnb3J5VHlwZSk7XG5cbiAgICAvLyDojrflj5bmnIDkvJjnp43lrZDojIPlm7RcbiAgICBjb25zdCBbbWluU2VlZCwgbWF4U2VlZF0gPSBnZXRPcHRpbWFsU2VlZFJhbmdlKGNhdGVnb3J5IGFzIENhdGVnb3J5VHlwZSk7XG4gICAgY29uc3Qgc2VlZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXhTZWVkIC0gbWluU2VlZCkpICsgbWluU2VlZDtcblxuICAgIC8vIOiOt+WPluS8mOWMlueahOeUn+aIkOWPguaVsFxuICAgIGNvbnN0IG9wdGltaXplZFBhcmFtcyA9IGdldE9wdGltaXplZFBhcmFtcyhjb21wbGV4aXR5KTtcblxuICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0aW5nIGltYWdlIHdpdGggcHJvbXB0OicsIGVuaGFuY2VkUHJvbXB0KTtcbiAgICBjb25zb2xlLmxvZygnTmVnYXRpdmUgcHJvbXB0OicsIG5lZ2F0aXZlUHJvbXB0KTtcblxuICAgIC8vIOWHhuWkh0FQSeivt+axguWPguaVsFxuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBtb2RlbDogTU9ERUwsXG4gICAgICBwcm9tcHQ6IGVuaGFuY2VkUHJvbXB0LFxuICAgICAgbmVnYXRpdmVfcHJvbXB0OiBuZWdhdGl2ZVByb21wdCxcbiAgICAgIHNlZWQsXG4gICAgICAuLi5vcHRpbWl6ZWRQYXJhbXNcbiAgICB9O1xuXG4gICAgLy8g6LCD55SoU2lsaWNvbkZsb3cgQVBJXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChBUElfVVJMLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7QVBJX0tFWX1gXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBlcnJvcjonLCBlcnJvckRhdGEpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGdlbmVyYXRlIGltYWdlIGZyb20gQVBJJywgXG4gICAgICAgICAgZGV0YWlsczogZXJyb3JEYXRhIFxuICAgICAgICB9IGFzIEdlbmVyYXRpb25SZXNwb25zZSxcbiAgICAgICAgeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgLy8g6I635Y+W55Sf5oiQ55qE5Zu+5YOP5pWw5o2uXG4gICAgY29uc3QgaW1hZ2VSZXNwb25zZSA9IGF3YWl0IGZldGNoKGRhdGEuZGF0YVswXS51cmwpO1xuICAgIGNvbnN0IGltYWdlQmxvYiA9IGF3YWl0IGltYWdlUmVzcG9uc2UuYmxvYigpO1xuXG4gICAgLy8g5LyY5YyW55Sf5oiQ55qE5Zu+5YOPXG4gICAgY29uc3Qgb3B0aW1pemVkSW1hZ2VCbG9iID0gYXdhaXQgb3B0aW1pemVJbWFnZShpbWFnZUJsb2IpO1xuXG4gICAgLy8g6K+E5Lyw5Zu+5YOP6LSo6YePXG4gICAgY29uc3QgcXVhbGl0eVNjb3JlID0gYXdhaXQgYXNzZXNzSW1hZ2VRdWFsaXR5KG9wdGltaXplZEltYWdlQmxvYik7XG5cbiAgICAvLyDlpoLmnpzotKjph4/liIbmlbDkvY7kuo7pmIjlgLzvvIzlsJ3or5Xkvb/nlKjpgJLlvZLmj5DnpLrkvJjljJbph43mlrDnlJ/miJBcbiAgICBpZiAocXVhbGl0eVNjb3JlIDwgNy4wKSB7XG4gICAgICBjb25zdCBvcHRpbWl6ZWRQcm9tcHQgPSByZWN1cnNpdmVQcm9tcHRPcHRpbWl6YXRpb24oZW5oYW5jZWRQcm9tcHQsIFtkYXRhLmRhdGFbMF0udXJsXSk7XG4gICAgICAvLyDov5nph4zlj6/ku6Xmt7vliqDph43mlrDnlJ/miJDnmoTpgLvovpFcbiAgICB9XG5cbiAgICAvLyDov5Tlm57nlJ/miJDnu5PmnpxcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHByb21wdDogZW5oYW5jZWRQcm9tcHQsXG4gICAgICBpbWFnZVVybDogZGF0YS5kYXRhWzBdLnVybCxcbiAgICAgIG1lc3NhZ2U6ICdJbWFnZSBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIHF1YWxpdHlTY29yZVxuICAgIH0gYXMgR2VuZXJhdGlvblJlc3BvbnNlKTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgaW1hZ2U6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGdlbmVyYXRlIGltYWdlJywgXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSBcbiAgICAgIH0gYXMgR2VuZXJhdGlvblJlc3BvbnNlLFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0T3B0aW1hbFNlZWRSYW5nZSIsImdldE9wdGltaXplZFBhcmFtcyIsImdldENhdGVnb3J5TmVnYXRpdmVQcm9tcHRzIiwiZW5oYW5jZVByb21wdCIsInJlY3Vyc2l2ZVByb21wdE9wdGltaXphdGlvbiIsIm9wdGltaXplSW1hZ2UiLCJhc3Nlc3NJbWFnZVF1YWxpdHkiLCJpbWFnZVF1ZXVlIiwiQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJTSUxJQ09ORkxPV19BUElfS0VZIiwiQVBJX1VSTCIsIlNJTElDT05GTE9XX0FQSV9VUkwiLCJNT0RFTCIsIlNJTElDT05GTE9XX01PREVMIiwiQkFTRV9QUk9NUFQiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwicHJvbXB0IiwiZXJyb3IiLCJzdGF0dXMiLCJqb2JJZCIsImFkZFRhc2siLCJjb25zb2xlIiwiR0VUIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwiZ2V0U3RhdHVzIiwiUE9TVF9vbGQiLCJkZXNjcmlwdGlvbiIsImNvbXBsZXhpdHkiLCJzdHlsZSIsImNhdGVnb3J5IiwiYmFzZVByb21wdCIsImNvbXBsZXhpdHlNb2RpZmllcnMiLCJzaW1wbGUiLCJkZXRhaWxlZCIsIm1lZGl1bSIsInN0eWxlTW9kaWZpZXJzIiwiY2FydG9vbiIsInJlYWxpc3RpYyIsImFic3RyYWN0IiwiZ2VvbWV0cmljIiwic3RhbmRhcmQiLCJlbmhhbmNlZFByb21wdCIsIm5lZ2F0aXZlUHJvbXB0IiwibWluU2VlZCIsIm1heFNlZWQiLCJzZWVkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwib3B0aW1pemVkUGFyYW1zIiwibG9nIiwicGF5bG9hZCIsIm1vZGVsIiwibmVnYXRpdmVfcHJvbXB0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJlcnJvckRhdGEiLCJkZXRhaWxzIiwiZGF0YSIsImltYWdlUmVzcG9uc2UiLCJpbWFnZUJsb2IiLCJibG9iIiwib3B0aW1pemVkSW1hZ2VCbG9iIiwicXVhbGl0eVNjb3JlIiwib3B0aW1pemVkUHJvbXB0Iiwic3VjY2VzcyIsImltYWdlVXJsIiwibWVzc2FnZSIsIkVycm9yIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/apiGateway.ts":
/*!*******************************!*\
  !*** ./src/lib/apiGateway.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageGenerationGateway: () => (/* binding */ ImageGenerationGateway),\n/* harmony export */   imageGateway: () => (/* binding */ imageGateway)\n/* harmony export */ });\n// 基础提示词模板\nconst BASE_PROMPT = `Create a clean black outline coloring page with the following characteristics:\n- Only simple black lines on white background\n- No shading, grayscale, or color\n- Clear distinct lines suitable for coloring\n- Clean and minimalist design\n- No text or labels\n- Perfect for printing and coloring with crayons or markers\nSubject: `;\n// 负面提示词\nconst NEGATIVE_PROMPT = \"photo, realistic, shading, grayscale, gradient, 3d, color, watercolor, painting, crosshatching, complex texture, busy background\";\n// SiliconFlow提供商实现\nclass SiliconFlowProvider {\n    constructor(){\n        this.apiKey = process.env.SILICONFLOW_API_KEY || \"\";\n        this.apiUrl = process.env.SILICONFLOW_API_URL || \"https://api.siliconflow.cn/v1/images/generations\";\n        this.model = process.env.SILICONFLOW_MODEL || \"black-forest-labs/FLUX.1-schnell\";\n    }\n    buildPrompt(request) {\n        let prompt = `${BASE_PROMPT}${request.prompt}`;\n        // 添加风格修饰词\n        const styleModifiers = {\n            cartoon: \"in a fun cartoon style, with simple clean lines\",\n            realistic: \"with realistic proportions but still as a line drawing\",\n            anime: \"in anime/manga style, with clean outlines\",\n            watercolor: \"in a flowing watercolor outline style\"\n        };\n        if (request.style && styleModifiers[request.style]) {\n            prompt += \", \" + styleModifiers[request.style];\n        }\n        // 添加复杂度修饰词\n        const complexityModifiers = {\n            simple: \"with very simple shapes and minimal details, perfect for young children\",\n            medium: \"with moderate level of detail\",\n            complex: \"with intricate details and more complex elements\"\n        };\n        if (request.complexity && complexityModifiers[request.complexity]) {\n            prompt += \", \" + complexityModifiers[request.complexity];\n        }\n        return prompt;\n    }\n    async generateImage(request) {\n        try {\n            const prompt = this.buildPrompt(request);\n            // 准备API请求参数\n            const payload = {\n                model: this.model,\n                prompt,\n                negative_prompt: NEGATIVE_PROMPT,\n                num_inference_steps: 30,\n                guidance_scale: 7.5,\n                size: request.size === \"large\" ? 1024 : request.size === \"small\" ? 512 : 768\n            };\n            // 调用SiliconFlow API\n            const response = await fetch(this.apiUrl, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${this.apiKey}`\n                },\n                body: JSON.stringify(payload)\n            });\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.error || \"Failed to generate image\");\n            }\n            const data = await response.json();\n            return {\n                jobId: data.id || data.task_id || \"\",\n                imageUrl: data.data?.[0]?.url\n            };\n        } catch (error) {\n            return {\n                jobId: \"\",\n                error: error instanceof Error ? error.message : \"Failed to generate image\"\n            };\n        }\n    }\n    async getStatus(jobId) {\n        try {\n            const response = await fetch(`${this.apiUrl}/tasks/${jobId}`, {\n                headers: {\n                    \"Authorization\": `Bearer ${this.apiKey}`\n                }\n            });\n            if (!response.ok) {\n                throw new Error(\"Failed to get status\");\n            }\n            const data = await response.json();\n            // 映射API响应状态到我们的状态\n            const statusMap = {\n                \"pending\": \"pending\",\n                \"processing\": \"processing\",\n                \"succeeded\": \"completed\",\n                \"failed\": \"failed\"\n            };\n            const status = statusMap[data.status] || \"failed\";\n            return {\n                status,\n                progress: data.progress || 0,\n                result: data.result?.url,\n                error: data.error\n            };\n        } catch (error) {\n            return {\n                status: \"failed\",\n                progress: 0,\n                error: error instanceof Error ? error.message : \"Failed to check status\"\n            };\n        }\n    }\n}\n// API Gateway类\nclass ImageGenerationGateway {\n    constructor(){\n        this.providers = new Map();\n        this.defaultProvider = \"siliconflow\";\n        // 注册提供商\n        this.providers.set(\"siliconflow\", new SiliconFlowProvider());\n    // 可以添加更多提供商\n    }\n    async generateImage(request) {\n        const provider = this.providers.get(this.defaultProvider);\n        if (!provider) {\n            throw new Error(\"No image generation provider available\");\n        }\n        return provider.generateImage(request);\n    }\n    async getJobStatus(jobId) {\n        const provider = this.providers.get(this.defaultProvider);\n        if (!provider) {\n            throw new Error(\"No image generation provider available\");\n        }\n        return provider.getStatus(jobId);\n    }\n    // 切换提供商\n    setProvider(providerName) {\n        if (this.providers.has(providerName)) {\n            this.defaultProvider = providerName;\n            return true;\n        }\n        return false;\n    }\n}\n// 创建单例实例\nconst imageGateway = new ImageGenerationGateway();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FwaUdhdGV3YXkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFhQSxVQUFVO0FBQ1YsTUFBTUEsY0FBYyxDQUFDOzs7Ozs7O1NBT1osQ0FBQztBQUVWLFFBQVE7QUFDUixNQUFNQyxrQkFBa0I7QUFFeEIsbUJBQW1CO0FBQ25CLE1BQU1DO0lBS0pDLGFBQWM7UUFDWixJQUFJLENBQUNDLE1BQU0sR0FBR0MsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUIsSUFBSTtRQUNqRCxJQUFJLENBQUNDLE1BQU0sR0FBR0gsUUFBUUMsR0FBRyxDQUFDRyxtQkFBbUIsSUFBSTtRQUNqRCxJQUFJLENBQUNDLEtBQUssR0FBR0wsUUFBUUMsR0FBRyxDQUFDSyxpQkFBaUIsSUFBSTtJQUNoRDtJQUVRQyxZQUFZQyxPQUEwQixFQUFVO1FBQ3RELElBQUlDLFNBQVMsQ0FBQyxFQUFFZCxZQUFZLEVBQUVhLFFBQVFDLE1BQU0sQ0FBQyxDQUFDO1FBRTlDLFVBQVU7UUFDVixNQUFNQyxpQkFBaUI7WUFDckJDLFNBQVM7WUFDVEMsV0FBVztZQUNYQyxPQUFPO1lBQ1BDLFlBQVk7UUFDZDtRQUVBLElBQUlOLFFBQVFPLEtBQUssSUFBSUwsY0FBYyxDQUFDRixRQUFRTyxLQUFLLENBQWdDLEVBQUU7WUFDakZOLFVBQVUsT0FBT0MsY0FBYyxDQUFDRixRQUFRTyxLQUFLLENBQWdDO1FBQy9FO1FBRUEsV0FBVztRQUNYLE1BQU1DLHNCQUFzQjtZQUMxQkMsUUFBUTtZQUNSQyxRQUFRO1lBQ1JDLFNBQVM7UUFDWDtRQUVBLElBQUlYLFFBQVFZLFVBQVUsSUFBSUosbUJBQW1CLENBQUNSLFFBQVFZLFVBQVUsQ0FBcUMsRUFBRTtZQUNyR1gsVUFBVSxPQUFPTyxtQkFBbUIsQ0FBQ1IsUUFBUVksVUFBVSxDQUFxQztRQUM5RjtRQUVBLE9BQU9YO0lBQ1Q7SUFFQSxNQUFNWSxjQUFjYixPQUEwQixFQUErQjtRQUMzRSxJQUFJO1lBQ0YsTUFBTUMsU0FBUyxJQUFJLENBQUNGLFdBQVcsQ0FBQ0M7WUFFaEMsWUFBWTtZQUNaLE1BQU1jLFVBQVU7Z0JBQ2RqQixPQUFPLElBQUksQ0FBQ0EsS0FBSztnQkFDakJJO2dCQUNBYyxpQkFBaUIzQjtnQkFDakI0QixxQkFBcUI7Z0JBQ3JCQyxnQkFBZ0I7Z0JBQ2hCQyxNQUFNbEIsUUFBUWtCLElBQUksS0FBSyxVQUFVLE9BQU9sQixRQUFRa0IsSUFBSSxLQUFLLFVBQVUsTUFBTTtZQUMzRTtZQUVBLG9CQUFvQjtZQUNwQixNQUFNQyxXQUFXLE1BQU1DLE1BQU0sSUFBSSxDQUFDekIsTUFBTSxFQUFFO2dCQUN4QzBCLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsZ0JBQWdCO29CQUNoQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDL0IsTUFBTSxDQUFDLENBQUM7Z0JBQzFDO2dCQUNBZ0MsTUFBTUMsS0FBS0MsU0FBUyxDQUFDWDtZQUN2QjtZQUVBLElBQUksQ0FBQ0ssU0FBU08sRUFBRSxFQUFFO2dCQUNoQixNQUFNQyxZQUFZLE1BQU1SLFNBQVNTLElBQUk7Z0JBQ3JDLE1BQU0sSUFBSUMsTUFBTUYsVUFBVUcsS0FBSyxJQUFJO1lBQ3JDO1lBRUEsTUFBTUMsT0FBTyxNQUFNWixTQUFTUyxJQUFJO1lBQ2hDLE9BQU87Z0JBQ0xJLE9BQU9ELEtBQUtFLEVBQUUsSUFBSUYsS0FBS0csT0FBTyxJQUFJO2dCQUNsQ0MsVUFBVUosS0FBS0EsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFSztZQUM1QjtRQUNGLEVBQUUsT0FBT04sT0FBTztZQUNkLE9BQU87Z0JBQ0xFLE9BQU87Z0JBQ1BGLE9BQU9BLGlCQUFpQkQsUUFBUUMsTUFBTU8sT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBLE1BQU1DLFVBQVVOLEtBQWEsRUFLMUI7UUFDRCxJQUFJO1lBQ0YsTUFBTWIsV0FBVyxNQUFNQyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUN6QixNQUFNLENBQUMsT0FBTyxFQUFFcUMsTUFBTSxDQUFDLEVBQUU7Z0JBQzVEVixTQUFTO29CQUNQLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMvQixNQUFNLENBQUMsQ0FBQztnQkFDMUM7WUFDRjtZQUVBLElBQUksQ0FBQzRCLFNBQVNPLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxJQUFJRyxNQUFNO1lBQ2xCO1lBRUEsTUFBTUUsT0FBTyxNQUFNWixTQUFTUyxJQUFJO1lBRWhDLGtCQUFrQjtZQUNsQixNQUFNVyxZQUF1QztnQkFDM0MsV0FBVztnQkFDWCxjQUFjO2dCQUNkLGFBQWE7Z0JBQ2IsVUFBVTtZQUNaO1lBRUEsTUFBTUMsU0FBU0QsU0FBUyxDQUFDUixLQUFLUyxNQUFNLENBQUMsSUFBSTtZQUV6QyxPQUFPO2dCQUNMQTtnQkFDQUMsVUFBVVYsS0FBS1UsUUFBUSxJQUFJO2dCQUMzQkMsUUFBUVgsS0FBS1csTUFBTSxFQUFFTjtnQkFDckJOLE9BQU9DLEtBQUtELEtBQUs7WUFDbkI7UUFDRixFQUFFLE9BQU9BLE9BQU87WUFDZCxPQUFPO2dCQUNMVSxRQUFRO2dCQUNSQyxVQUFVO2dCQUNWWCxPQUFPQSxpQkFBaUJELFFBQVFDLE1BQU1PLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7QUFDRjtBQUVBLGVBQWU7QUFDUixNQUFNTTtJQUlYckQsYUFBYztRQUNaLElBQUksQ0FBQ3NELFNBQVMsR0FBRyxJQUFJQztRQUNyQixJQUFJLENBQUNDLGVBQWUsR0FBRztRQUV2QixRQUFRO1FBQ1IsSUFBSSxDQUFDRixTQUFTLENBQUNHLEdBQUcsQ0FBQyxlQUFlLElBQUkxRDtJQUN0QyxZQUFZO0lBQ2Q7SUFFQSxNQUFNd0IsY0FBY2IsT0FBMEIsRUFBK0I7UUFDM0UsTUFBTWdELFdBQVcsSUFBSSxDQUFDSixTQUFTLENBQUNLLEdBQUcsQ0FBQyxJQUFJLENBQUNILGVBQWU7UUFDeEQsSUFBSSxDQUFDRSxVQUFVO1lBQ2IsTUFBTSxJQUFJbkIsTUFBTTtRQUNsQjtRQUVBLE9BQU9tQixTQUFTbkMsYUFBYSxDQUFDYjtJQUNoQztJQUVBLE1BQU1rRCxhQUFhbEIsS0FBYSxFQUFFO1FBQ2hDLE1BQU1nQixXQUFXLElBQUksQ0FBQ0osU0FBUyxDQUFDSyxHQUFHLENBQUMsSUFBSSxDQUFDSCxlQUFlO1FBQ3hELElBQUksQ0FBQ0UsVUFBVTtZQUNiLE1BQU0sSUFBSW5CLE1BQU07UUFDbEI7UUFFQSxPQUFPbUIsU0FBU1YsU0FBUyxDQUFDTjtJQUM1QjtJQUVBLFFBQVE7SUFDUm1CLFlBQVlDLFlBQW9CLEVBQUU7UUFDaEMsSUFBSSxJQUFJLENBQUNSLFNBQVMsQ0FBQ1MsR0FBRyxDQUFDRCxlQUFlO1lBQ3BDLElBQUksQ0FBQ04sZUFBZSxHQUFHTTtZQUN2QixPQUFPO1FBQ1Q7UUFDQSxPQUFPO0lBQ1Q7QUFDRjtBQUVBLFNBQVM7QUFDRixNQUFNRSxlQUFlLElBQUlYLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbG9yaW5ncGFnZS8uL3NyYy9saWIvYXBpR2F0ZXdheS50cz9iMTA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdlbmVyYXRpb25SZXF1ZXN0LCBHZW5lcmF0aW9uUmVzcG9uc2UsIEpvYlN0YXR1cyB9IGZyb20gJ0AvdHlwZXMvaW1hZ2UnO1xuXG4vLyBBUEnmj5DkvpvllYbmjqXlj6NcbmludGVyZmFjZSBJbWFnZVByb3ZpZGVyIHtcbiAgZ2VuZXJhdGVJbWFnZShyZXF1ZXN0OiBHZW5lcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8R2VuZXJhdGlvblJlc3BvbnNlPjtcbiAgZ2V0U3RhdHVzKGpvYklkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICBzdGF0dXM6IEpvYlN0YXR1cztcbiAgICBwcm9ncmVzcz86IG51bWJlcjtcbiAgICByZXN1bHQ/OiBzdHJpbmc7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG4gIH0+O1xufVxuXG4vLyDln7rnoYDmj5DnpLror43mqKHmnb9cbmNvbnN0IEJBU0VfUFJPTVBUID0gYENyZWF0ZSBhIGNsZWFuIGJsYWNrIG91dGxpbmUgY29sb3JpbmcgcGFnZSB3aXRoIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVyaXN0aWNzOlxuLSBPbmx5IHNpbXBsZSBibGFjayBsaW5lcyBvbiB3aGl0ZSBiYWNrZ3JvdW5kXG4tIE5vIHNoYWRpbmcsIGdyYXlzY2FsZSwgb3IgY29sb3Jcbi0gQ2xlYXIgZGlzdGluY3QgbGluZXMgc3VpdGFibGUgZm9yIGNvbG9yaW5nXG4tIENsZWFuIGFuZCBtaW5pbWFsaXN0IGRlc2lnblxuLSBObyB0ZXh0IG9yIGxhYmVsc1xuLSBQZXJmZWN0IGZvciBwcmludGluZyBhbmQgY29sb3Jpbmcgd2l0aCBjcmF5b25zIG9yIG1hcmtlcnNcblN1YmplY3Q6IGA7XG5cbi8vIOi0n+mdouaPkOekuuivjVxuY29uc3QgTkVHQVRJVkVfUFJPTVBUID0gJ3Bob3RvLCByZWFsaXN0aWMsIHNoYWRpbmcsIGdyYXlzY2FsZSwgZ3JhZGllbnQsIDNkLCBjb2xvciwgd2F0ZXJjb2xvciwgcGFpbnRpbmcsIGNyb3NzaGF0Y2hpbmcsIGNvbXBsZXggdGV4dHVyZSwgYnVzeSBiYWNrZ3JvdW5kJztcblxuLy8gU2lsaWNvbkZsb3fmj5DkvpvllYblrp7njrBcbmNsYXNzIFNpbGljb25GbG93UHJvdmlkZXIgaW1wbGVtZW50cyBJbWFnZVByb3ZpZGVyIHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSBhcGlVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBtb2RlbDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYXBpS2V5ID0gcHJvY2Vzcy5lbnYuU0lMSUNPTkZMT1dfQVBJX0tFWSB8fCAnJztcbiAgICB0aGlzLmFwaVVybCA9IHByb2Nlc3MuZW52LlNJTElDT05GTE9XX0FQSV9VUkwgfHwgJ2h0dHBzOi8vYXBpLnNpbGljb25mbG93LmNuL3YxL2ltYWdlcy9nZW5lcmF0aW9ucyc7XG4gICAgdGhpcy5tb2RlbCA9IHByb2Nlc3MuZW52LlNJTElDT05GTE9XX01PREVMIHx8ICdibGFjay1mb3Jlc3QtbGFicy9GTFVYLjEtc2NobmVsbCc7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkUHJvbXB0KHJlcXVlc3Q6IEdlbmVyYXRpb25SZXF1ZXN0KTogc3RyaW5nIHtcbiAgICBsZXQgcHJvbXB0ID0gYCR7QkFTRV9QUk9NUFR9JHtyZXF1ZXN0LnByb21wdH1gO1xuXG4gICAgLy8g5re75Yqg6aOO5qC85L+u6aWw6K+NXG4gICAgY29uc3Qgc3R5bGVNb2RpZmllcnMgPSB7XG4gICAgICBjYXJ0b29uOiAnaW4gYSBmdW4gY2FydG9vbiBzdHlsZSwgd2l0aCBzaW1wbGUgY2xlYW4gbGluZXMnLFxuICAgICAgcmVhbGlzdGljOiAnd2l0aCByZWFsaXN0aWMgcHJvcG9ydGlvbnMgYnV0IHN0aWxsIGFzIGEgbGluZSBkcmF3aW5nJyxcbiAgICAgIGFuaW1lOiAnaW4gYW5pbWUvbWFuZ2Egc3R5bGUsIHdpdGggY2xlYW4gb3V0bGluZXMnLFxuICAgICAgd2F0ZXJjb2xvcjogJ2luIGEgZmxvd2luZyB3YXRlcmNvbG9yIG91dGxpbmUgc3R5bGUnXG4gICAgfTtcblxuICAgIGlmIChyZXF1ZXN0LnN0eWxlICYmIHN0eWxlTW9kaWZpZXJzW3JlcXVlc3Quc3R5bGUgYXMga2V5b2YgdHlwZW9mIHN0eWxlTW9kaWZpZXJzXSkge1xuICAgICAgcHJvbXB0ICs9ICcsICcgKyBzdHlsZU1vZGlmaWVyc1tyZXF1ZXN0LnN0eWxlIGFzIGtleW9mIHR5cGVvZiBzdHlsZU1vZGlmaWVyc107XG4gICAgfVxuXG4gICAgLy8g5re75Yqg5aSN5p2C5bqm5L+u6aWw6K+NXG4gICAgY29uc3QgY29tcGxleGl0eU1vZGlmaWVycyA9IHtcbiAgICAgIHNpbXBsZTogJ3dpdGggdmVyeSBzaW1wbGUgc2hhcGVzIGFuZCBtaW5pbWFsIGRldGFpbHMsIHBlcmZlY3QgZm9yIHlvdW5nIGNoaWxkcmVuJyxcbiAgICAgIG1lZGl1bTogJ3dpdGggbW9kZXJhdGUgbGV2ZWwgb2YgZGV0YWlsJyxcbiAgICAgIGNvbXBsZXg6ICd3aXRoIGludHJpY2F0ZSBkZXRhaWxzIGFuZCBtb3JlIGNvbXBsZXggZWxlbWVudHMnXG4gICAgfTtcblxuICAgIGlmIChyZXF1ZXN0LmNvbXBsZXhpdHkgJiYgY29tcGxleGl0eU1vZGlmaWVyc1tyZXF1ZXN0LmNvbXBsZXhpdHkgYXMga2V5b2YgdHlwZW9mIGNvbXBsZXhpdHlNb2RpZmllcnNdKSB7XG4gICAgICBwcm9tcHQgKz0gJywgJyArIGNvbXBsZXhpdHlNb2RpZmllcnNbcmVxdWVzdC5jb21wbGV4aXR5IGFzIGtleW9mIHR5cGVvZiBjb21wbGV4aXR5TW9kaWZpZXJzXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbXB0O1xuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVJbWFnZShyZXF1ZXN0OiBHZW5lcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8R2VuZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuYnVpbGRQcm9tcHQocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIC8vIOWHhuWkh0FQSeivt+axguWPguaVsFxuICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgIHByb21wdCxcbiAgICAgICAgbmVnYXRpdmVfcHJvbXB0OiBORUdBVElWRV9QUk9NUFQsXG4gICAgICAgIG51bV9pbmZlcmVuY2Vfc3RlcHM6IDMwLFxuICAgICAgICBndWlkYW5jZV9zY2FsZTogNy41LFxuICAgICAgICBzaXplOiByZXF1ZXN0LnNpemUgPT09ICdsYXJnZScgPyAxMDI0IDogcmVxdWVzdC5zaXplID09PSAnc21hbGwnID8gNTEyIDogNzY4XG4gICAgICB9O1xuXG4gICAgICAvLyDosIPnlKhTaWxpY29uRmxvdyBBUElcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5hcGlVcmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWBcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCAnRmFpbGVkIHRvIGdlbmVyYXRlIGltYWdlJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBqb2JJZDogZGF0YS5pZCB8fCBkYXRhLnRhc2tfaWQgfHwgJycsXG4gICAgICAgIGltYWdlVXJsOiBkYXRhLmRhdGE/LlswXT8udXJsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBqb2JJZDogJycsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgaW1hZ2UnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFN0YXR1cyhqb2JJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgc3RhdHVzOiBKb2JTdGF0dXM7XG4gICAgcHJvZ3Jlc3M/OiBudW1iZXI7XG4gICAgcmVzdWx0Pzogc3RyaW5nO1xuICAgIGVycm9yPzogc3RyaW5nO1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5hcGlVcmx9L3Rhc2tzLyR7am9iSWR9YCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgc3RhdHVzJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIC8vIOaYoOWwhEFQSeWTjeW6lOeKtuaAgeWIsOaIkeS7rOeahOeKtuaAgVxuICAgICAgY29uc3Qgc3RhdHVzTWFwOiBSZWNvcmQ8c3RyaW5nLCBKb2JTdGF0dXM+ID0ge1xuICAgICAgICAncGVuZGluZyc6ICdwZW5kaW5nJyxcbiAgICAgICAgJ3Byb2Nlc3NpbmcnOiAncHJvY2Vzc2luZycsXG4gICAgICAgICdzdWNjZWVkZWQnOiAnY29tcGxldGVkJyxcbiAgICAgICAgJ2ZhaWxlZCc6ICdmYWlsZWQnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdGF0dXMgPSBzdGF0dXNNYXBbZGF0YS5zdGF0dXNdIHx8ICdmYWlsZWQnO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXMsXG4gICAgICAgIHByb2dyZXNzOiBkYXRhLnByb2dyZXNzIHx8IDAsXG4gICAgICAgIHJlc3VsdDogZGF0YS5yZXN1bHQ/LnVybCxcbiAgICAgICAgZXJyb3I6IGRhdGEuZXJyb3JcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcgYXMgSm9iU3RhdHVzLFxuICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBjaGVjayBzdGF0dXMnXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyBBUEkgR2F0ZXdheeexu1xuZXhwb3J0IGNsYXNzIEltYWdlR2VuZXJhdGlvbkdhdGV3YXkge1xuICBwcml2YXRlIHByb3ZpZGVyczogTWFwPHN0cmluZywgSW1hZ2VQcm92aWRlcj47XG4gIHByaXZhdGUgZGVmYXVsdFByb3ZpZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5kZWZhdWx0UHJvdmlkZXIgPSAnc2lsaWNvbmZsb3cnO1xuICAgIFxuICAgIC8vIOazqOWGjOaPkOS+m+WVhlxuICAgIHRoaXMucHJvdmlkZXJzLnNldCgnc2lsaWNvbmZsb3cnLCBuZXcgU2lsaWNvbkZsb3dQcm92aWRlcigpKTtcbiAgICAvLyDlj6/ku6Xmt7vliqDmm7TlpJrmj5DkvpvllYZcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSW1hZ2UocmVxdWVzdDogR2VuZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEdlbmVyYXRpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wcm92aWRlcnMuZ2V0KHRoaXMuZGVmYXVsdFByb3ZpZGVyKTtcbiAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGltYWdlIGdlbmVyYXRpb24gcHJvdmlkZXIgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3ZpZGVyLmdlbmVyYXRlSW1hZ2UocmVxdWVzdCk7XG4gIH1cblxuICBhc3luYyBnZXRKb2JTdGF0dXMoam9iSWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5wcm92aWRlcnMuZ2V0KHRoaXMuZGVmYXVsdFByb3ZpZGVyKTtcbiAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGltYWdlIGdlbmVyYXRpb24gcHJvdmlkZXIgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3ZpZGVyLmdldFN0YXR1cyhqb2JJZCk7XG4gIH1cblxuICAvLyDliIfmjaLmj5DkvpvllYZcbiAgc2V0UHJvdmlkZXIocHJvdmlkZXJOYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKHByb3ZpZGVyTmFtZSkpIHtcbiAgICAgIHRoaXMuZGVmYXVsdFByb3ZpZGVyID0gcHJvdmlkZXJOYW1lO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyDliJvlu7rljZXkvovlrp7kvotcbmV4cG9ydCBjb25zdCBpbWFnZUdhdGV3YXkgPSBuZXcgSW1hZ2VHZW5lcmF0aW9uR2F0ZXdheSgpOyAiXSwibmFtZXMiOlsiQkFTRV9QUk9NUFQiLCJORUdBVElWRV9QUk9NUFQiLCJTaWxpY29uRmxvd1Byb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiU0lMSUNPTkZMT1dfQVBJX0tFWSIsImFwaVVybCIsIlNJTElDT05GTE9XX0FQSV9VUkwiLCJtb2RlbCIsIlNJTElDT05GTE9XX01PREVMIiwiYnVpbGRQcm9tcHQiLCJyZXF1ZXN0IiwicHJvbXB0Iiwic3R5bGVNb2RpZmllcnMiLCJjYXJ0b29uIiwicmVhbGlzdGljIiwiYW5pbWUiLCJ3YXRlcmNvbG9yIiwic3R5bGUiLCJjb21wbGV4aXR5TW9kaWZpZXJzIiwic2ltcGxlIiwibWVkaXVtIiwiY29tcGxleCIsImNvbXBsZXhpdHkiLCJnZW5lcmF0ZUltYWdlIiwicGF5bG9hZCIsIm5lZ2F0aXZlX3Byb21wdCIsIm51bV9pbmZlcmVuY2Vfc3RlcHMiLCJndWlkYW5jZV9zY2FsZSIsInNpemUiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiRXJyb3IiLCJlcnJvciIsImRhdGEiLCJqb2JJZCIsImlkIiwidGFza19pZCIsImltYWdlVXJsIiwidXJsIiwibWVzc2FnZSIsImdldFN0YXR1cyIsInN0YXR1c01hcCIsInN0YXR1cyIsInByb2dyZXNzIiwicmVzdWx0IiwiSW1hZ2VHZW5lcmF0aW9uR2F0ZXdheSIsInByb3ZpZGVycyIsIk1hcCIsImRlZmF1bHRQcm92aWRlciIsInNldCIsInByb3ZpZGVyIiwiZ2V0IiwiZ2V0Sm9iU3RhdHVzIiwic2V0UHJvdmlkZXIiLCJwcm92aWRlck5hbWUiLCJoYXMiLCJpbWFnZUdhdGV3YXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/apiGateway.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/imageProcessing.ts":
/*!************************************!*\
  !*** ./src/lib/imageProcessing.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeColoringPageQuality: () => (/* binding */ analyzeColoringPageQuality),\n/* harmony export */   assessImageQuality: () => (/* binding */ assessImageQuality),\n/* harmony export */   enhancePrompt: () => (/* binding */ enhancePrompt),\n/* harmony export */   getCategoryNegativePrompts: () => (/* binding */ getCategoryNegativePrompts),\n/* harmony export */   getOptimalSeedRange: () => (/* binding */ getOptimalSeedRange),\n/* harmony export */   getOptimizedParams: () => (/* binding */ getOptimizedParams),\n/* harmony export */   getSuggestedPromptEnhancements: () => (/* binding */ getSuggestedPromptEnhancements),\n/* harmony export */   optimizeImage: () => (/* binding */ optimizeImage),\n/* harmony export */   recursivePromptOptimization: () => (/* binding */ recursivePromptOptimization)\n/* harmony export */ });\n/**\n * Image Processing Service for Coloring Pages\n * \n * This service handles image optimization specifically for coloring pages\n * - Ensures clean black outlines on white background\n * - Optimizes for printing\n * - Provides image analysis and enhancement\n */ /**\n * Image processing utility functions for AI coloring page generation\n */ /**\n * Get optimal seed range for specific content types\n * Different seed ranges produce better results for different content types\n */ function getOptimalSeedRange(category) {\n    const seedRanges = {\n        animals: [\n            120000,\n            140000\n        ],\n        nature: [\n            140000,\n            160000\n        ],\n        fantasy: [\n            160000,\n            180000\n        ],\n        vehicles: [\n            180000,\n            200000\n        ],\n        patterns: [\n            200000,\n            220000\n        ],\n        default: [\n            100000,\n            999999\n        ]\n    };\n    return seedRanges[category] || seedRanges.default;\n}\n/**\n * Get optimized parameters for specific image types\n */ function getOptimizedParams(complexity) {\n    const baseParams = {\n        num_inference_steps: 30,\n        guidance_scale: 7.5\n    };\n    const complexityParams = {\n        simple: {\n            num_inference_steps: 28,\n            guidance_scale: 7.0\n        },\n        medium: baseParams,\n        detailed: {\n            num_inference_steps: 32,\n            guidance_scale: 8.2\n        }\n    };\n    return complexityParams[complexity] || baseParams;\n}\n/**\n * Get category-specific negative prompts to improve generation quality\n */ function getCategoryNegativePrompts(category) {\n    const baseNegative = \"photo, realistic, shading, grayscale, gradient, 3d, color, watercolor, painting, crosshatching, complex texture, busy background\";\n    const categoryNegatives = {\n        animals: `${baseNegative}, human, people, text, realistic fur, realistic eyes`,\n        nature: `${baseNegative}, people, buildings, vehicles, complex patterns`,\n        fantasy: `${baseNegative}, realistic, modern, urban, technical`,\n        vehicles: `${baseNegative}, organic shapes, people, animals, nature`,\n        patterns: `${baseNegative}, specific objects, scenes, figures`,\n        default: baseNegative\n    };\n    return categoryNegatives[category] || categoryNegatives.default;\n}\n/**\n * Get suggested prompt enhancements based on user input\n */ function getSuggestedPromptEnhancements(userPrompt) {\n    const suggestions = [];\n    // Check for common improvement opportunities\n    if (userPrompt.length < 10) {\n        suggestions.push(\"Add more details to your description for better results\");\n    }\n    if (!userPrompt.toLowerCase().includes(\"background\")) {\n        suggestions.push(\"Consider describing the background or setting\");\n    }\n    if (!userPrompt.match(/position|pose|standing|sitting/i)) {\n        suggestions.push(\"Specify the position or pose of the main subject\");\n    }\n    // Add general suggestions if no specific ones were found\n    if (suggestions.length === 0) {\n        suggestions.push(\"Try adding adjectives to describe the mood or style\");\n        suggestions.push(\"Consider specifying the perspective (e.g., front view, side view)\");\n    }\n    return suggestions;\n}\n// Function to determine if an image has good contrast for coloring\nfunction analyzeColoringPageQuality(imageData) {\n    // This would normally use canvas and image processing libraries\n    // For demonstration, we're providing a simulated analysis\n    // In a real implementation, this would:\n    // 1. Measure the contrast between lines and background\n    // 2. Check for presence of grayscale elements (should be pure black/white)\n    // 3. Analyze line thickness and consistency\n    // 4. Evaluate balance of white space vs. coloring areas\n    // Simulated score between 0-100\n    const score = 85;\n    const feedback = [\n        \"Good contrast between lines and background\",\n        \"Clean black outlines detected\",\n        \"Appropriate line thickness for coloring\",\n        \"Good balance of detail and open spaces\"\n    ];\n    return {\n        score,\n        feedback\n    };\n}\n// 提示词增强引擎\nfunction enhancePrompt(basePrompt, category) {\n    const styleModifiers = {\n        animals: \"(lineart:1.2), (clean lines:1.1), (single line thickness:1.05), simplified animal drawing\",\n        nature: \"(lineart:1.2), (clean lines:1.1), (botanical illustration:1.05)\",\n        fantasy: \"(lineart:1.2), (clean lines:1.1), (storybook illustration:1.05)\",\n        vehicles: \"(lineart:1.2), (clean lines:1.1), (technical drawing:1.05)\",\n        patterns: \"(lineart:1.2), (clean lines:1.1), (geometric pattern:1.05)\",\n        default: \"(lineart:1.2), (clean lines:1.1), (single line thickness:1.05)\"\n    };\n    return `${basePrompt} ${styleModifiers[category] || styleModifiers.default}`;\n}\n// 图像后处理优化\nasync function optimizeImage(imageData) {\n    // 这里将来可以添加实际的图像处理逻辑\n    // 例如：边缘检测、背景纯白化、线条黑化等\n    return imageData;\n}\n// 递归提示优化\nfunction recursivePromptOptimization(basePrompt, previousResults, attempts = 0) {\n    const maxAttempts = 3;\n    if (attempts >= maxAttempts) {\n        return basePrompt;\n    }\n    // 基于之前的结果调整提示词\n    let optimizedPrompt = basePrompt;\n    if (previousResults.length > 0) {\n        // 这里可以添加基于之前结果的优化逻辑\n        optimizedPrompt += \" (high quality:1.2), (clear lines:1.1)\";\n    }\n    return optimizedPrompt;\n}\n// 图像质量评估\nfunction assessImageQuality(imageData) {\n    return new Promise((resolve)=>{\n        // 这里将来可以添加实际的质量评估逻辑\n        // 返回0-10的质量分数\n        resolve(8.5);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJa0MsZUFBZTNCLE9BQU8sQ0FBQyxDQUFDO0FBQzlFO0FBRUEsVUFBVTtBQUNILGVBQWU0QixjQUFjTixTQUFlO0lBQ2pELG9CQUFvQjtJQUNwQixzQkFBc0I7SUFDdEIsT0FBT0E7QUFDVDtBQUVBLFNBQVM7QUFDRixTQUFTTyw0QkFDZEgsVUFBa0IsRUFDbEJJLGVBQXlCLEVBQ3pCQyxXQUFtQixDQUFDO0lBRXBCLE1BQU1DLGNBQWM7SUFDcEIsSUFBSUQsWUFBWUMsYUFBYTtRQUMzQixPQUFPTjtJQUNUO0lBRUEsZUFBZTtJQUNmLElBQUlPLGtCQUFrQlA7SUFDdEIsSUFBSUksZ0JBQWdCZCxNQUFNLEdBQUcsR0FBRztRQUM5QixvQkFBb0I7UUFDcEJpQixtQkFBbUI7SUFDckI7SUFFQSxPQUFPQTtBQUNUO0FBRUEsU0FBUztBQUNGLFNBQVNDLG1CQUFtQlosU0FBZTtJQUNoRCxPQUFPLElBQUlhLFFBQVEsQ0FBQ0M7UUFDbEIsb0JBQW9CO1FBQ3BCLGNBQWM7UUFDZEEsUUFBUTtJQUNWO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2xvcmluZ3BhZ2UvLi9zcmMvbGliL2ltYWdlUHJvY2Vzc2luZy50cz84MGZhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW1hZ2UgUHJvY2Vzc2luZyBTZXJ2aWNlIGZvciBDb2xvcmluZyBQYWdlc1xuICogXG4gKiBUaGlzIHNlcnZpY2UgaGFuZGxlcyBpbWFnZSBvcHRpbWl6YXRpb24gc3BlY2lmaWNhbGx5IGZvciBjb2xvcmluZyBwYWdlc1xuICogLSBFbnN1cmVzIGNsZWFuIGJsYWNrIG91dGxpbmVzIG9uIHdoaXRlIGJhY2tncm91bmRcbiAqIC0gT3B0aW1pemVzIGZvciBwcmludGluZ1xuICogLSBQcm92aWRlcyBpbWFnZSBhbmFseXNpcyBhbmQgZW5oYW5jZW1lbnRcbiAqL1xuXG4vKipcbiAqIEltYWdlIHByb2Nlc3NpbmcgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIEFJIGNvbG9yaW5nIHBhZ2UgZ2VuZXJhdGlvblxuICovXG5cbi8qKlxuICogR2V0IG9wdGltYWwgc2VlZCByYW5nZSBmb3Igc3BlY2lmaWMgY29udGVudCB0eXBlc1xuICogRGlmZmVyZW50IHNlZWQgcmFuZ2VzIHByb2R1Y2UgYmV0dGVyIHJlc3VsdHMgZm9yIGRpZmZlcmVudCBjb250ZW50IHR5cGVzXG4gKi9cbmltcG9ydCB7IENhdGVnb3J5VHlwZSB9IGZyb20gJ0AvdHlwZXMvaW1hZ2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3B0aW1hbFNlZWRSYW5nZShjYXRlZ29yeTogQ2F0ZWdvcnlUeXBlKTogW251bWJlciwgbnVtYmVyXSB7XG4gIGNvbnN0IHNlZWRSYW5nZXMgPSB7XG4gICAgYW5pbWFsczogWzEyMDAwMCwgMTQwMDAwXSxcbiAgICBuYXR1cmU6IFsxNDAwMDAsIDE2MDAwMF0sXG4gICAgZmFudGFzeTogWzE2MDAwMCwgMTgwMDAwXSxcbiAgICB2ZWhpY2xlczogWzE4MDAwMCwgMjAwMDAwXSxcbiAgICBwYXR0ZXJuczogWzIwMDAwMCwgMjIwMDAwXSxcbiAgICBkZWZhdWx0OiBbMTAwMDAwLCA5OTk5OTldXG4gIH07XG4gIFxuICByZXR1cm4gc2VlZFJhbmdlc1tjYXRlZ29yeV0gfHwgc2VlZFJhbmdlcy5kZWZhdWx0O1xufVxuXG4vKipcbiAqIEdldCBvcHRpbWl6ZWQgcGFyYW1ldGVycyBmb3Igc3BlY2lmaWMgaW1hZ2UgdHlwZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGltaXplZFBhcmFtcyhjb21wbGV4aXR5OiBzdHJpbmcpIHtcbiAgY29uc3QgYmFzZVBhcmFtcyA9IHtcbiAgICBudW1faW5mZXJlbmNlX3N0ZXBzOiAzMCxcbiAgICBndWlkYW5jZV9zY2FsZTogNy41LFxuICB9O1xuXG4gIGNvbnN0IGNvbXBsZXhpdHlQYXJhbXMgPSB7XG4gICAgc2ltcGxlOiB7XG4gICAgICBudW1faW5mZXJlbmNlX3N0ZXBzOiAyOCxcbiAgICAgIGd1aWRhbmNlX3NjYWxlOiA3LjAsXG4gICAgfSxcbiAgICBtZWRpdW06IGJhc2VQYXJhbXMsXG4gICAgZGV0YWlsZWQ6IHtcbiAgICAgIG51bV9pbmZlcmVuY2Vfc3RlcHM6IDMyLFxuICAgICAgZ3VpZGFuY2Vfc2NhbGU6IDguMixcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGNvbXBsZXhpdHlQYXJhbXNbY29tcGxleGl0eV0gfHwgYmFzZVBhcmFtcztcbn1cblxuLyoqXG4gKiBHZXQgY2F0ZWdvcnktc3BlY2lmaWMgbmVnYXRpdmUgcHJvbXB0cyB0byBpbXByb3ZlIGdlbmVyYXRpb24gcXVhbGl0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlOZWdhdGl2ZVByb21wdHMoY2F0ZWdvcnk6IENhdGVnb3J5VHlwZSk6IHN0cmluZyB7XG4gIGNvbnN0IGJhc2VOZWdhdGl2ZSA9ICdwaG90bywgcmVhbGlzdGljLCBzaGFkaW5nLCBncmF5c2NhbGUsIGdyYWRpZW50LCAzZCwgY29sb3IsIHdhdGVyY29sb3IsIHBhaW50aW5nLCBjcm9zc2hhdGNoaW5nLCBjb21wbGV4IHRleHR1cmUsIGJ1c3kgYmFja2dyb3VuZCc7XG4gIFxuICBjb25zdCBjYXRlZ29yeU5lZ2F0aXZlcyA9IHtcbiAgICBhbmltYWxzOiBgJHtiYXNlTmVnYXRpdmV9LCBodW1hbiwgcGVvcGxlLCB0ZXh0LCByZWFsaXN0aWMgZnVyLCByZWFsaXN0aWMgZXllc2AsXG4gICAgbmF0dXJlOiBgJHtiYXNlTmVnYXRpdmV9LCBwZW9wbGUsIGJ1aWxkaW5ncywgdmVoaWNsZXMsIGNvbXBsZXggcGF0dGVybnNgLFxuICAgIGZhbnRhc3k6IGAke2Jhc2VOZWdhdGl2ZX0sIHJlYWxpc3RpYywgbW9kZXJuLCB1cmJhbiwgdGVjaG5pY2FsYCxcbiAgICB2ZWhpY2xlczogYCR7YmFzZU5lZ2F0aXZlfSwgb3JnYW5pYyBzaGFwZXMsIHBlb3BsZSwgYW5pbWFscywgbmF0dXJlYCxcbiAgICBwYXR0ZXJuczogYCR7YmFzZU5lZ2F0aXZlfSwgc3BlY2lmaWMgb2JqZWN0cywgc2NlbmVzLCBmaWd1cmVzYCxcbiAgICBkZWZhdWx0OiBiYXNlTmVnYXRpdmVcbiAgfTtcblxuICByZXR1cm4gY2F0ZWdvcnlOZWdhdGl2ZXNbY2F0ZWdvcnldIHx8IGNhdGVnb3J5TmVnYXRpdmVzLmRlZmF1bHQ7XG59XG5cbi8qKlxuICogR2V0IHN1Z2dlc3RlZCBwcm9tcHQgZW5oYW5jZW1lbnRzIGJhc2VkIG9uIHVzZXIgaW5wdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN1Z2dlc3RlZFByb21wdEVuaGFuY2VtZW50cyh1c2VyUHJvbXB0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHN1Z2dlc3Rpb25zID0gW107XG5cbiAgLy8gQ2hlY2sgZm9yIGNvbW1vbiBpbXByb3ZlbWVudCBvcHBvcnR1bml0aWVzXG4gIGlmICh1c2VyUHJvbXB0Lmxlbmd0aCA8IDEwKSB7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCgnQWRkIG1vcmUgZGV0YWlscyB0byB5b3VyIGRlc2NyaXB0aW9uIGZvciBiZXR0ZXIgcmVzdWx0cycpO1xuICB9XG4gIFxuICBpZiAoIXVzZXJQcm9tcHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYmFja2dyb3VuZCcpKSB7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCgnQ29uc2lkZXIgZGVzY3JpYmluZyB0aGUgYmFja2dyb3VuZCBvciBzZXR0aW5nJyk7XG4gIH1cbiAgXG4gIGlmICghdXNlclByb21wdC5tYXRjaCgvcG9zaXRpb258cG9zZXxzdGFuZGluZ3xzaXR0aW5nL2kpKSB7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCgnU3BlY2lmeSB0aGUgcG9zaXRpb24gb3IgcG9zZSBvZiB0aGUgbWFpbiBzdWJqZWN0Jyk7XG4gIH1cbiAgXG4gIC8vIEFkZCBnZW5lcmFsIHN1Z2dlc3Rpb25zIGlmIG5vIHNwZWNpZmljIG9uZXMgd2VyZSBmb3VuZFxuICBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCgnVHJ5IGFkZGluZyBhZGplY3RpdmVzIHRvIGRlc2NyaWJlIHRoZSBtb29kIG9yIHN0eWxlJyk7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCgnQ29uc2lkZXIgc3BlY2lmeWluZyB0aGUgcGVyc3BlY3RpdmUgKGUuZy4sIGZyb250IHZpZXcsIHNpZGUgdmlldyknKTtcbiAgfVxuICBcbiAgcmV0dXJuIHN1Z2dlc3Rpb25zO1xufVxuXG4vLyBGdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgYW4gaW1hZ2UgaGFzIGdvb2QgY29udHJhc3QgZm9yIGNvbG9yaW5nXG5leHBvcnQgZnVuY3Rpb24gYW5hbHl6ZUNvbG9yaW5nUGFnZVF1YWxpdHkoaW1hZ2VEYXRhOiBhbnkpOiB7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGZlZWRiYWNrOiBzdHJpbmdbXTtcbn0ge1xuICAvLyBUaGlzIHdvdWxkIG5vcm1hbGx5IHVzZSBjYW52YXMgYW5kIGltYWdlIHByb2Nlc3NpbmcgbGlicmFyaWVzXG4gIC8vIEZvciBkZW1vbnN0cmF0aW9uLCB3ZSdyZSBwcm92aWRpbmcgYSBzaW11bGF0ZWQgYW5hbHlzaXNcbiAgXG4gIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZDpcbiAgLy8gMS4gTWVhc3VyZSB0aGUgY29udHJhc3QgYmV0d2VlbiBsaW5lcyBhbmQgYmFja2dyb3VuZFxuICAvLyAyLiBDaGVjayBmb3IgcHJlc2VuY2Ugb2YgZ3JheXNjYWxlIGVsZW1lbnRzIChzaG91bGQgYmUgcHVyZSBibGFjay93aGl0ZSlcbiAgLy8gMy4gQW5hbHl6ZSBsaW5lIHRoaWNrbmVzcyBhbmQgY29uc2lzdGVuY3lcbiAgLy8gNC4gRXZhbHVhdGUgYmFsYW5jZSBvZiB3aGl0ZSBzcGFjZSB2cy4gY29sb3JpbmcgYXJlYXNcbiAgXG4gIC8vIFNpbXVsYXRlZCBzY29yZSBiZXR3ZWVuIDAtMTAwXG4gIGNvbnN0IHNjb3JlID0gODU7XG4gIFxuICBjb25zdCBmZWVkYmFjayA9IFtcbiAgICBcIkdvb2QgY29udHJhc3QgYmV0d2VlbiBsaW5lcyBhbmQgYmFja2dyb3VuZFwiLFxuICAgIFwiQ2xlYW4gYmxhY2sgb3V0bGluZXMgZGV0ZWN0ZWRcIixcbiAgICBcIkFwcHJvcHJpYXRlIGxpbmUgdGhpY2tuZXNzIGZvciBjb2xvcmluZ1wiLFxuICAgIFwiR29vZCBiYWxhbmNlIG9mIGRldGFpbCBhbmQgb3BlbiBzcGFjZXNcIixcbiAgXTtcbiAgXG4gIHJldHVybiB7IHNjb3JlLCBmZWVkYmFjayB9O1xufVxuXG4vLyDmj5DnpLror43lop7lvLrlvJXmk45cbmV4cG9ydCBmdW5jdGlvbiBlbmhhbmNlUHJvbXB0KGJhc2VQcm9tcHQ6IHN0cmluZywgY2F0ZWdvcnk6IENhdGVnb3J5VHlwZSk6IHN0cmluZyB7XG4gIGNvbnN0IHN0eWxlTW9kaWZpZXJzID0ge1xuICAgIGFuaW1hbHM6ICcobGluZWFydDoxLjIpLCAoY2xlYW4gbGluZXM6MS4xKSwgKHNpbmdsZSBsaW5lIHRoaWNrbmVzczoxLjA1KSwgc2ltcGxpZmllZCBhbmltYWwgZHJhd2luZycsXG4gICAgbmF0dXJlOiAnKGxpbmVhcnQ6MS4yKSwgKGNsZWFuIGxpbmVzOjEuMSksIChib3RhbmljYWwgaWxsdXN0cmF0aW9uOjEuMDUpJyxcbiAgICBmYW50YXN5OiAnKGxpbmVhcnQ6MS4yKSwgKGNsZWFuIGxpbmVzOjEuMSksIChzdG9yeWJvb2sgaWxsdXN0cmF0aW9uOjEuMDUpJyxcbiAgICB2ZWhpY2xlczogJyhsaW5lYXJ0OjEuMiksIChjbGVhbiBsaW5lczoxLjEpLCAodGVjaG5pY2FsIGRyYXdpbmc6MS4wNSknLFxuICAgIHBhdHRlcm5zOiAnKGxpbmVhcnQ6MS4yKSwgKGNsZWFuIGxpbmVzOjEuMSksIChnZW9tZXRyaWMgcGF0dGVybjoxLjA1KScsXG4gICAgZGVmYXVsdDogJyhsaW5lYXJ0OjEuMiksIChjbGVhbiBsaW5lczoxLjEpLCAoc2luZ2xlIGxpbmUgdGhpY2tuZXNzOjEuMDUpJ1xuICB9O1xuXG4gIHJldHVybiBgJHtiYXNlUHJvbXB0fSAke3N0eWxlTW9kaWZpZXJzW2NhdGVnb3J5XSB8fCBzdHlsZU1vZGlmaWVycy5kZWZhdWx0fWA7XG59XG5cbi8vIOWbvuWDj+WQjuWkhOeQhuS8mOWMllxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9wdGltaXplSW1hZ2UoaW1hZ2VEYXRhOiBCbG9iKTogUHJvbWlzZTxCbG9iPiB7XG4gIC8vIOi/memHjOWwhuadpeWPr+S7pea3u+WKoOWunumZheeahOWbvuWDj+WkhOeQhumAu+i+kVxuICAvLyDkvovlpoLvvJrovrnnvJjmo4DmtYvjgIHog4zmma/nuq/nmb3ljJbjgIHnur/mnaHpu5HljJbnrYlcbiAgcmV0dXJuIGltYWdlRGF0YTtcbn1cblxuLy8g6YCS5b2S5o+Q56S65LyY5YyWXG5leHBvcnQgZnVuY3Rpb24gcmVjdXJzaXZlUHJvbXB0T3B0aW1pemF0aW9uKFxuICBiYXNlUHJvbXB0OiBzdHJpbmcsXG4gIHByZXZpb3VzUmVzdWx0czogc3RyaW5nW10sXG4gIGF0dGVtcHRzOiBudW1iZXIgPSAwXG4pOiBzdHJpbmcge1xuICBjb25zdCBtYXhBdHRlbXB0cyA9IDM7XG4gIGlmIChhdHRlbXB0cyA+PSBtYXhBdHRlbXB0cykge1xuICAgIHJldHVybiBiYXNlUHJvbXB0O1xuICB9XG5cbiAgLy8g5Z+65LqO5LmL5YmN55qE57uT5p6c6LCD5pW05o+Q56S66K+NXG4gIGxldCBvcHRpbWl6ZWRQcm9tcHQgPSBiYXNlUHJvbXB0O1xuICBpZiAocHJldmlvdXNSZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAvLyDov5nph4zlj6/ku6Xmt7vliqDln7rkuo7kuYvliY3nu5PmnpznmoTkvJjljJbpgLvovpFcbiAgICBvcHRpbWl6ZWRQcm9tcHQgKz0gJyAoaGlnaCBxdWFsaXR5OjEuMiksIChjbGVhciBsaW5lczoxLjEpJztcbiAgfVxuXG4gIHJldHVybiBvcHRpbWl6ZWRQcm9tcHQ7XG59XG5cbi8vIOWbvuWDj+i0qOmHj+ivhOS8sFxuZXhwb3J0IGZ1bmN0aW9uIGFzc2Vzc0ltYWdlUXVhbGl0eShpbWFnZURhdGE6IEJsb2IpOiBQcm9taXNlPG51bWJlcj4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAvLyDov5nph4zlsIbmnaXlj6/ku6Xmt7vliqDlrp7pmYXnmoTotKjph4/or4TkvLDpgLvovpFcbiAgICAvLyDov5Tlm54wLTEw55qE6LSo6YeP5YiG5pWwXG4gICAgcmVzb2x2ZSg4LjUpO1xuICB9KTtcbn0gIl0sIm5hbWVzIjpbImdldE9wdGltYWxTZWVkUmFuZ2UiLCJjYXRlZ29yeSIsInNlZWRSYW5nZXMiLCJhbmltYWxzIiwibmF0dXJlIiwiZmFudGFzeSIsInZlaGljbGVzIiwicGF0dGVybnMiLCJkZWZhdWx0IiwiZ2V0T3B0aW1pemVkUGFyYW1zIiwiY29tcGxleGl0eSIsImJhc2VQYXJhbXMiLCJudW1faW5mZXJlbmNlX3N0ZXBzIiwiZ3VpZGFuY2Vfc2NhbGUiLCJjb21wbGV4aXR5UGFyYW1zIiwic2ltcGxlIiwibWVkaXVtIiwiZGV0YWlsZWQiLCJnZXRDYXRlZ29yeU5lZ2F0aXZlUHJvbXB0cyIsImJhc2VOZWdhdGl2ZSIsImNhdGVnb3J5TmVnYXRpdmVzIiwiZ2V0U3VnZ2VzdGVkUHJvbXB0RW5oYW5jZW1lbnRzIiwidXNlclByb21wdCIsInN1Z2dlc3Rpb25zIiwibGVuZ3RoIiwicHVzaCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJtYXRjaCIsImFuYWx5emVDb2xvcmluZ1BhZ2VRdWFsaXR5IiwiaW1hZ2VEYXRhIiwic2NvcmUiLCJmZWVkYmFjayIsImVuaGFuY2VQcm9tcHQiLCJiYXNlUHJvbXB0Iiwic3R5bGVNb2RpZmllcnMiLCJvcHRpbWl6ZUltYWdlIiwicmVjdXJzaXZlUHJvbXB0T3B0aW1pemF0aW9uIiwicHJldmlvdXNSZXN1bHRzIiwiYXR0ZW1wdHMiLCJtYXhBdHRlbXB0cyIsIm9wdGltaXplZFByb21wdCIsImFzc2Vzc0ltYWdlUXVhbGl0eSIsIlByb21pc2UiLCJyZXNvbHZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/imageProcessing.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/queue.ts":
/*!**************************!*\
  !*** ./src/lib/queue.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageGenerationQueue: () => (/* binding */ ImageGenerationQueue),\n/* harmony export */   imageQueue: () => (/* binding */ imageQueue)\n/* harmony export */ });\n/* harmony import */ var _apiGateway__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apiGateway */ \"(rsc)/./src/lib/apiGateway.ts\");\n\n// 内存队列实现（可以替换为Redis或其他持久化存储）\nclass ImageGenerationQueue {\n    constructor(maxConcurrent = 3){\n        this.queue = new Map();\n        this.processing = new Set();\n        this.maxConcurrent = maxConcurrent;\n    }\n    // 添加任务到队列\n    async addTask(request) {\n        const id = `job-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const item = {\n            id,\n            request,\n            status: \"pending\",\n            progress: 0,\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        this.queue.set(id, item);\n        this.processQueue();\n        return id;\n    }\n    // 获取任务状态\n    async getStatus(id) {\n        return this.queue.get(id) || null;\n    }\n    // 更新任务状态\n    async updateStatus(id, status, progress, result, error) {\n        const item = this.queue.get(id);\n        if (item) {\n            item.status = status;\n            item.progress = progress;\n            item.result = result;\n            item.error = error;\n            item.updatedAt = new Date();\n        }\n    }\n    // 处理队列\n    async processQueue() {\n        if (this.processing.size >= this.maxConcurrent) {\n            return;\n        }\n        // 使用 Array.from 来避免 Map 迭代器的类型错误\n        const entries = Array.from(this.queue.entries());\n        for (const [id, item] of entries){\n            if (item.status === \"pending\" && !this.processing.has(id)) {\n                this.processing.add(id);\n                this.processTask(id, item).finally(()=>{\n                    this.processing.delete(id);\n                    this.processQueue();\n                });\n            }\n        }\n    }\n    // 处理单个任务\n    async processTask(id, item) {\n        try {\n            await this.updateStatus(id, \"processing\", 0);\n            // 调用 SiliconFlow API 生成图像\n            const response = await _apiGateway__WEBPACK_IMPORTED_MODULE_0__.imageGateway.generateImage(item.request);\n            if (response.error) {\n                throw new Error(response.error);\n            }\n            // 更新进度为50%，表示图像生成已开始\n            await this.updateStatus(id, \"processing\", 50);\n            // 等待并检查任务状态\n            let retries = 0;\n            const maxRetries = 30; // 最多等待60秒\n            while(retries < maxRetries){\n                const status = await _apiGateway__WEBPACK_IMPORTED_MODULE_0__.imageGateway.getJobStatus(response.jobId);\n                if (status.status === \"completed\") {\n                    await this.updateStatus(id, \"completed\", 100, status.result);\n                    break;\n                } else if (status.status === \"failed\") {\n                    throw new Error(status.error || \"Image generation failed\");\n                }\n                // 更新进度\n                await this.updateStatus(id, \"processing\", 50 + (status.progress || 0) * 0.5);\n                // 等待2秒后再次检查\n                await new Promise((resolve)=>setTimeout(resolve, 2000));\n                retries++;\n            }\n            if (retries >= maxRetries) {\n                throw new Error(\"Image generation timed out\");\n            }\n        } catch (error) {\n            await this.updateStatus(id, \"failed\", 0, undefined, error instanceof Error ? error.message : String(error));\n        }\n    }\n    // 清理已完成的任务\n    async cleanup(maxAge = 24 * 60 * 60 * 1000) {\n        const now = new Date();\n        // 使用 Array.from 来避免 Map 迭代器的类型错误\n        const entries = Array.from(this.queue.entries());\n        for (const [id, item] of entries){\n            if (item.status === \"completed\" && now.getTime() - item.updatedAt.getTime() > maxAge) {\n                this.queue.delete(id);\n            }\n        }\n    }\n}\n// 创建单例实例\nconst imageQueue = new ImageGenerationQueue();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNoRCxLQUFLLENBQUNpQyxNQUFNLENBQUMzQjtZQUNwQjtRQUNGO0lBQ0Y7QUFDRjtBQUVBLFNBQVM7QUFDRixNQUFNNEMsYUFBYSxJQUFJckQsdUJBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29sb3JpbmdwYWdlLy4vc3JjL2xpYi9xdWV1ZS50cz8wMjU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdlbmVyYXRpb25SZXF1ZXN0LCBHZW5lcmF0aW9uUmVzcG9uc2UsIEpvYlN0YXR1cyB9IGZyb20gJ0AvdHlwZXMvaW1hZ2UnO1xuaW1wb3J0IHsgaW1hZ2VHYXRld2F5IH0gZnJvbSAnLi9hcGlHYXRld2F5JztcblxuLy8g6Zif5YiX6aG55o6l5Y+jXG5pbnRlcmZhY2UgUXVldWVJdGVtIHtcbiAgaWQ6IHN0cmluZztcbiAgcmVxdWVzdDogR2VuZXJhdGlvblJlcXVlc3Q7XG4gIHN0YXR1czogSm9iU3RhdHVzO1xuICBwcm9ncmVzczogbnVtYmVyO1xuICByZXN1bHQ/OiBzdHJpbmc7XG4gIGVycm9yPzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuLy8g5YaF5a2Y6Zif5YiX5a6e546w77yI5Y+v5Lul5pu/5o2i5Li6UmVkaXPmiJblhbbku5bmjIHkuYXljJblrZjlgqjvvIlcbmV4cG9ydCBjbGFzcyBJbWFnZUdlbmVyYXRpb25RdWV1ZSB7XG4gIHByaXZhdGUgcXVldWU6IE1hcDxzdHJpbmcsIFF1ZXVlSXRlbT47XG4gIHByaXZhdGUgcHJvY2Vzc2luZzogU2V0PHN0cmluZz47XG4gIHByaXZhdGUgbWF4Q29uY3VycmVudDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG1heENvbmN1cnJlbnQ6IG51bWJlciA9IDMpIHtcbiAgICB0aGlzLnF1ZXVlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucHJvY2Vzc2luZyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLm1heENvbmN1cnJlbnQgPSBtYXhDb25jdXJyZW50O1xuICB9XG5cbiAgLy8g5re75Yqg5Lu75Yqh5Yiw6Zif5YiXXG4gIGFzeW5jIGFkZFRhc2socmVxdWVzdDogR2VuZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGlkID0gYGpvYi0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgY29uc3QgaXRlbTogUXVldWVJdGVtID0ge1xuICAgICAgaWQsXG4gICAgICByZXF1ZXN0LFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBwcm9ncmVzczogMCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH07XG5cbiAgICB0aGlzLnF1ZXVlLnNldChpZCwgaXRlbSk7XG4gICAgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICAvLyDojrflj5bku7vliqHnirbmgIFcbiAgYXN5bmMgZ2V0U3RhdHVzKGlkOiBzdHJpbmcpOiBQcm9taXNlPFF1ZXVlSXRlbSB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5xdWV1ZS5nZXQoaWQpIHx8IG51bGw7XG4gIH1cblxuICAvLyDmm7TmlrDku7vliqHnirbmgIFcbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVTdGF0dXMoaWQ6IHN0cmluZywgc3RhdHVzOiBKb2JTdGF0dXMsIHByb2dyZXNzOiBudW1iZXIsIHJlc3VsdD86IHN0cmluZywgZXJyb3I/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5xdWV1ZS5nZXQoaWQpO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBpdGVtLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgIGl0ZW0ucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgIGl0ZW0ucmVzdWx0ID0gcmVzdWx0O1xuICAgICAgaXRlbS5lcnJvciA9IGVycm9yO1xuICAgICAgaXRlbS51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOWkhOeQhumYn+WIl1xuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NRdWV1ZSgpIHtcbiAgICBpZiAodGhpcy5wcm9jZXNzaW5nLnNpemUgPj0gdGhpcy5tYXhDb25jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g5L2/55SoIEFycmF5LmZyb20g5p2l6YG/5YWNIE1hcCDov63ku6PlmajnmoTnsbvlnovplJnor69cbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLnF1ZXVlLmVudHJpZXMoKSk7XG4gICAgZm9yIChjb25zdCBbaWQsIGl0ZW1dIG9mIGVudHJpZXMpIHtcbiAgICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gJ3BlbmRpbmcnICYmICF0aGlzLnByb2Nlc3NpbmcuaGFzKGlkKSkge1xuICAgICAgICB0aGlzLnByb2Nlc3NpbmcuYWRkKGlkKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzVGFzayhpZCwgaXRlbSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9jZXNzaW5nLmRlbGV0ZShpZCk7XG4gICAgICAgICAgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8g5aSE55CG5Y2V5Liq5Lu75YqhXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1Rhc2soaWQ6IHN0cmluZywgaXRlbTogUXVldWVJdGVtKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlU3RhdHVzKGlkLCAncHJvY2Vzc2luZycsIDApO1xuICAgICAgXG4gICAgICAvLyDosIPnlKggU2lsaWNvbkZsb3cgQVBJIOeUn+aIkOWbvuWDj1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbWFnZUdhdGV3YXkuZ2VuZXJhdGVJbWFnZShpdGVtLnJlcXVlc3QpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yKTtcbiAgICAgIH1cblxuICAgICAgLy8g5pu05paw6L+b5bqm5Li6NTAl77yM6KGo56S65Zu+5YOP55Sf5oiQ5bey5byA5aeLXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVN0YXR1cyhpZCwgJ3Byb2Nlc3NpbmcnLCA1MCk7XG5cbiAgICAgIC8vIOetieW+heW5tuajgOafpeS7u+WKoeeKtuaAgVxuICAgICAgbGV0IHJldHJpZXMgPSAwO1xuICAgICAgY29uc3QgbWF4UmV0cmllcyA9IDMwOyAvLyDmnIDlpJrnrYnlvoU2MOenklxuICAgICAgXG4gICAgICB3aGlsZSAocmV0cmllcyA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgaW1hZ2VHYXRld2F5LmdldEpvYlN0YXR1cyhyZXNwb25zZS5qb2JJZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3RhdHVzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVN0YXR1cyhpZCwgJ2NvbXBsZXRlZCcsIDEwMCwgc3RhdHVzLnJlc3VsdCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3RhdHVzLmVycm9yIHx8ICdJbWFnZSBnZW5lcmF0aW9uIGZhaWxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDmm7TmlrDov5vluqZcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTdGF0dXMoaWQsICdwcm9jZXNzaW5nJywgNTAgKyAoc3RhdHVzLnByb2dyZXNzIHx8IDApICogMC41KTtcbiAgICAgICAgXG4gICAgICAgIC8vIOetieW+hTLnp5LlkI7lho3mrKHmo4Dmn6VcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcbiAgICAgICAgcmV0cmllcysrO1xuICAgICAgfVxuXG4gICAgICBpZiAocmV0cmllcyA+PSBtYXhSZXRyaWVzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW1hZ2UgZ2VuZXJhdGlvbiB0aW1lZCBvdXQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVN0YXR1cyhpZCwgJ2ZhaWxlZCcsIDAsIHVuZGVmaW5lZCwgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpKTtcbiAgICB9XG4gIH1cblxuICAvLyDmuIXnkIblt7LlrozmiJDnmoTku7vliqFcbiAgYXN5bmMgY2xlYW51cChtYXhBZ2U6IG51bWJlciA9IDI0ICogNjAgKiA2MCAqIDEwMDApIHsgLy8g6buY6K6kMjTlsI/ml7ZcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIC8vIOS9v+eUqCBBcnJheS5mcm9tIOadpemBv+WFjSBNYXAg6L+t5Luj5Zmo55qE57G75Z6L6ZSZ6K+vXG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmZyb20odGhpcy5xdWV1ZS5lbnRyaWVzKCkpO1xuICAgIGZvciAoY29uc3QgW2lkLCBpdGVtXSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoaXRlbS5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIG5vdy5nZXRUaW1lKCkgLSBpdGVtLnVwZGF0ZWRBdC5nZXRUaW1lKCkgPiBtYXhBZ2UpIHtcbiAgICAgICAgdGhpcy5xdWV1ZS5kZWxldGUoaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyDliJvlu7rljZXkvovlrp7kvotcbmV4cG9ydCBjb25zdCBpbWFnZVF1ZXVlID0gbmV3IEltYWdlR2VuZXJhdGlvblF1ZXVlKCk7ICJdLCJuYW1lcyI6WyJpbWFnZUdhdGV3YXkiLCJJbWFnZUdlbmVyYXRpb25RdWV1ZSIsImNvbnN0cnVjdG9yIiwibWF4Q29uY3VycmVudCIsInF1ZXVlIiwiTWFwIiwicHJvY2Vzc2luZyIsIlNldCIsImFkZFRhc2siLCJyZXF1ZXN0IiwiaWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiaXRlbSIsInN0YXR1cyIsInByb2dyZXNzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic2V0IiwicHJvY2Vzc1F1ZXVlIiwiZ2V0U3RhdHVzIiwiZ2V0IiwidXBkYXRlU3RhdHVzIiwicmVzdWx0IiwiZXJyb3IiLCJzaXplIiwiZW50cmllcyIsIkFycmF5IiwiZnJvbSIsImhhcyIsImFkZCIsInByb2Nlc3NUYXNrIiwiZmluYWxseSIsImRlbGV0ZSIsInJlc3BvbnNlIiwiZ2VuZXJhdGVJbWFnZSIsIkVycm9yIiwicmV0cmllcyIsIm1heFJldHJpZXMiLCJnZXRKb2JTdGF0dXMiLCJqb2JJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInVuZGVmaW5lZCIsIm1lc3NhZ2UiLCJTdHJpbmciLCJjbGVhbnVwIiwibWF4QWdlIiwiZ2V0VGltZSIsImltYWdlUXVldWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/queue.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbruno2025%2FDocuments%2FiProjects%2Fcoloringpage%2Fcoloringpage&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();